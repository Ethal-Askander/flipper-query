<!DOCTYPE html>
<link rel="stylesheet" href="index.css">
<html lang="en">
<body>
<head>
    <title>Flipper Query</title>
    <link rel="shortcut icon" type="images/x-icon" href="../images/icon.ico" />
</head>

<div>
    <h1 class="title">Flipper Query</h1>
</div>

<div>
    <form action="/search" method="GET">
        <input class="search-bar" type="text" name="q" id="search" placeholder="Jordan 1..." />
    </form>
</div>

<div class="card-container">
    <div class="card">
        <b>Jordan 1 Retro High Dark Mocha</b>
        <img 
            width="80%"
            height="50%"    
            src="https://stockx.imgix.net/images/Air-Jordan-1-Retro-High-Dark-Mocha-2-Product.jpg?fit=fill&bg=FFFFFF&w=300&h=214&auto=format,compress&trim=color&q=90&dpr=2&updated_at=1608736454"
        />
        <p>Retail cost: $350 <br />
        Estimated sale price: $700 <br />
        Estimated total additional costs: $210 <br />
        Profit: $140 <br />
        </p>

        <button>Go to</button>
        
    </div>
</div>

<p id="products" value="products" />

<script>
    // Attempt to get response headers
    var req = new XMLHttpRequest();
    req.open('GET', document.location, false);
    req.send(null);
    
    // Get the products from search
    let products = req.getResponseHeader('products');
    if (products) {
        // Testing, to see how to parse and get information from a product.
        products = JSON.parse(products);
        for (product of products) {
            console.log(product);
        }
        document.getElementById('products').innerHTML = `<b> ${products[0].name} </b>`;
    }
</script>

</body>
</html>